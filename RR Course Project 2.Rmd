---
title: "Module 5: Reproducible Research - Course Project 2"
author: "Roddy Mendoza Marriott"
date: "2025-06-19"
output:
  html_document: default
  pdf_document: default
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## 1.Introduction

Storms and other severe weather events can cause both public health and economic problems for communities and municipalities. Many severe events can result in fatalities, injuries, and property damage, and preventing such outcomes to the extent possible is a key concern.

This project involves exploring the U.S. National Oceanic and Atmospheric Administration's (NOAA) storm database. This database tracks characteristics of major storms and weather events in the United States, including when and where they occur, as well as estimates of any fatalities, injuries, and property damage.

## 2.Data

The data for this assignment come in the form of a comma-separated-value file compressed via the bzip2 algorithm to reduce its size. You can download the file from the course web site:

[Storm Data](https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2)

There is also some documentation of the database available. Here you will find how some of the variables are constructed/defined.

[National Weather Service Storm Data Documentation](https://d396qusza40orc.cloudfront.net/repdata%2Fpeer2_doc%2Fpd01016005curr.pdf)

[National Climatic Data Center Storm Events](https://d396qusza40orc.cloudfront.net/repdata%2Fpeer2_doc%2FNCDC%20Storm%20Events-FAQ%20Page.pdf)

The events in the database start in the year 1950 and end in November 2011. In the earlier years of the database there are generally fewer events recorded, most likely due to a lack of good records. More recent years should be considered more complete.


## 3.Questions to be answered 

The data analysis must address the following questions:

1. Across the United States, which types of events (as indicated in the EVTYPEEVTYPEstart color red, start verbatim, EVTYPE, end verbatim, end color red variable) are most harmful with respect to population health?

2. Across the United States, which types of events have the greatest economic consequences?


## 4.Loading libraries
```{r, message=FALSE,warning=FALSE}
library(ggplot2)
library(tidyverse)
library(rmarkdown)
library(magrittr)
library(kableExtra)
library(DT)
```


## 5.Getting the data
## 5.1 Creating a data directory

```{r, message=FALSE,warning=FALSE}
# 1. Create a data directory
if(!base::file.exists("data")) {
    base::dir.create("data")
}

# 2. Download files and store it in data directory.
if(!base::file.exists("./data/repdata_data_StormData.csv.bz2")){
    utils::download.file(url = "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2",
                         destfile = "./data/repdata_data_StormData.csv.bz2")
}
```


## 5.2 Loading the data

```{r, message=FALSE,warning=FALSE}
# 1. the raw data
raw_data <- utils::read.csv(file = "./data/repdata_data_StormData.csv.bz2")
```

```{r, message=FALSE,warning=FALSE}
# 2. converting into a data frame 
raw_data <- dplyr::tbl_df(raw_data)
```


## 6 Some EDA on the data

This section presents a few remarks in the EDA on the data from NOAA.

## 6.1 Dimensions 

```{r, message=FALSE,warning=FALSE}
base::dim(raw_data)
```

## 6.2 Head and Tail

Printing the first 5 rows from dataset

```{r, message=FALSE,warning=FALSE}
# printing the first 5 rows from raw data
head(raw_data,5)
```


Printing the last 5 rows from dataset

```{r, message=FALSE,warning=FALSE}
# printing the last 5 rows from raw data
tail(raw_data,5)
```


## 6.3 Variables

The dataset from NOAA has 37 variables, as wee seen using the `str` function

```{r, message=FALSE,warning=FALSE}
utils::str(raw_data)
```

## 6.3 `NA` Presence

```{r, message=FALSE,warning=FALSE}
# Printing the summ of LATITUDE
summary(raw_data$LATITUDE)
```

```{r, message=FALSE,warning=FALSE}
# Printing the summ of Latitude_e
summary(raw_data$LATITUDE_E)
```


## 6.4 Exponential variables´s treatment

The `PROPDMGEXP` and `CROPDMGEXP`(Properties Exponential and Crop Exponential) variables store the base 10 exponential value of `PROPDMG` and `CROPDMG`,
respectively. For this reason, it is necessary to combine `PROPDMG` and `PROPDMGEXP` into a single variable and do the same to `CROPDMG` and `CROPDMGEXP`

Therefore, it is essential to understand how the `PROPDMGEXP` and `CROPDMGEXP` were recorded.


```{r, message=FALSE,warning=FALSE}
# Printing the unique values to exponential to properties
unique(raw_data$PROPDMGEXP)
```

```{r, message=FALSE,warning=FALSE}
# Printing the unique values to exponential to Crops.
unique(raw_data$CROPDMGEXP)
```

Finally, the notation is not uniform because sometimes they use Capital or Lowercase (e.g., `K` or `k`). In other cases, they use a number or insert a question mark (`?`) or plus/minus signal (e.g., `-` or `+`).

*`PROPDMGEXP`

  + `?`: Has 8 (eight) observations with this notation, none of the rows of `PROPDM` and `CROPDMG` has values;
  + `+`: Has 5 (five) observations with this notation, and;
  + `-`: Has 1 (one) observation with this notation and 1 (one) fatality. I will consider like “0”.


*`CROPDMGEXP`

  + `?`: Has 7 (seven) observations with this notation, all those with `CROPDMG` as zero;







